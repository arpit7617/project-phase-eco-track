<!DOCTYPE html>
<html lang="en">
<head>
  <title>EcoTrack - Community</title>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="/community.css" />
</head>
<body>
  <nav class="navbar">
    <div class="logo">ğŸŒ± EcoTrack</div>
    <div class="nav-links"> 
      <a href="/">Home</a>
      <a href="/weather">Weather</a>
      <a href="/aqi">AQI</a>
      <a href="/location">My Location</a>
      <a href="/community">Community</a>
      <a href="/logout">Logout (<%= username %>)</a>
      <a href="/logs">Logs</a>
    </div>
  </nav>

  <h1>ğŸŒ EcoTrack Community</h1>
  <p>Share your eco-friendly tips and learn from others!</p>

  <form action="/community" method="POST" enctype="multipart/form-data">
    <label for="username">Your Name:</label>
    <input type="text" id="username" name="username" value="<%= username %>" readonly />

    <label for="tip">Your Eco-Friendly Tip:</label>
    <textarea id="tip" name="tip" rows="4" required></textarea>

    <label for="image">Upload an Image (optional):</label>
    <input type="file" id="image" name="image" accept="image/*" />

    <button type="submit">Share Tip</button>
  </form>

  <h2>ğŸ“š Community Tips</h2>
  <div id="tips-container">
    <% tips.forEach(function(tip) { %>
      <div class="tip-card">
        <div class="tip-header">
          <img src="<%= tip.imageUrl || '/images/default.jpg' %>" alt="User Image" />
          <div>
            <p class="tip-username"><%= tip.username %></p>
            <p class="tip-date"><%= tip.date %></p>
          </div>
        </div>

        <div class="tip-content">
          <p><%= tip.tip %></p>
        </div>

        <div class="tip-footer">
          <button type="button" class="like-btn">â¤ï¸ <span><%= tip.likes %></span></button>
        </div>
      </div>
    <% }); %>
  </div>

  <h2>ğŸ† Top Contributors</h2>
  <button onclick="window.location.href='/leaderboard'">View Leaderboard</button>
</body>
</html>
